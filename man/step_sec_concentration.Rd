% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_sec_concentration.R
\name{step_sec_concentration}
\alias{step_sec_concentration}
\title{Convert Detector Signal to Concentration}
\usage{
step_sec_concentration(
  recipe,
  measures = NULL,
  detector = c("ri", "uv", "auto"),
  injection_volume = NULL,
  injection_mass = NULL,
  sample_concentration = NULL,
  flow_rate = 1,
  concentration_units = "mg/mL",
  normalize_to_mass = TRUE,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("sec_concentration")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{measures}{Character vector of detector column names to convert.
If \code{NULL}, will convert all measure columns.}

\item{detector}{Type of detector signal being converted:
\itemize{
\item \code{"ri"}: Refractive index detector (assumes dn/dc normalized)
\item \code{"uv"}: UV detector (assumes extinction coefficient normalized)
\item \code{"auto"}: Attempt to detect from column names
}}

\item{injection_volume}{Injection volume in uL. Required for absolute
concentration calculation.}

\item{injection_mass}{Injected mass in mg. Alternative to using
\code{sample_concentration} and \code{injection_volume}.}

\item{sample_concentration}{Sample concentration in mg/mL. Used with
\code{injection_volume} to calculate injected mass.}

\item{flow_rate}{Flow rate in mL/min for peak area calculations.}

\item{concentration_units}{Output concentration units. Default is \code{"mg/mL"}.}

\item{normalize_to_mass}{Logical. If \code{TRUE}, normalize the chromatogram
so that the total area equals the injected mass. Default is \code{TRUE}.}

\item{role}{Role for generated columns.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\code{step_sec_concentration()} creates a \emph{specification} of a recipe step that
converts detector signals to absolute concentration values using calibration
factors and injection parameters.
}
\details{
This step converts detector response (after dn/dc or extinction coefficient
normalization) to absolute concentration. The conversion uses the known
injected mass to normalize the chromatogram area:

\deqn{c(t) = \frac{S(t) \times m_{inj}}{\int S(t) \times F \times dt}}

where:
\itemize{
\item S(t) is the normalized detector signal
\item m_inj is the injected mass
\item F is the flow rate
}

\strong{Workflow for concentration determination:}
\enumerate{
\item Baseline correct the chromatogram
\item Apply detector-specific normalization (dn/dc or extinction coefficient)
\item Apply this step with known injection parameters
\item Result: concentration at each elution point
}
}
\examples{
\dontrun{
library(recipes)
library(measure)

# Convert RI signal to concentration
rec <- recipe(~., data = sec_triple_detect) |>
  step_measure_input_long(ri_signal, location = vars(elution_time), col_name = "ri") |>
  step_sec_baseline() |>
  step_sec_ri(dn_dc = 0.185) |>
  step_sec_concentration(
    detector = "ri",
    injection_volume = 100,        # uL
    sample_concentration = 2.0,    # mg/mL
    flow_rate = 1.0                # mL/min
  ) |>
  prep()
}
}
\seealso{
Other sec-detectors: 
\code{\link{step_sec_intrinsic_visc}()},
\code{\link{step_sec_mals}()},
\code{\link{step_sec_ri}()},
\code{\link{step_sec_uv}()},
\code{\link{step_sec_viscometer}()}
}
\concept{sec-detectors}
