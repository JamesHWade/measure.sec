% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_sec_exclude_regions.R
\name{step_sec_exclude_regions}
\alias{step_sec_exclude_regions}
\title{SEC/GPC Region Exclusion}
\usage{
step_sec_exclude_regions(
  recipe,
  measures = NULL,
  regions = NULL,
  purpose = c("both", "baseline", "integration"),
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("sec_exclude_regions")
)
}
\arguments{
\item{recipe}{A recipe object. The step will be added to the sequence of
operations for this recipe.}

\item{measures}{An optional character vector of measure column names to
process. If \code{NULL} (the default), all measure columns will be processed.}

\item{regions}{A data frame or tibble specifying regions to exclude. Must
contain columns \code{start} and \code{end} (x-axis values defining each region).
Optional columns: \code{reason} (character describing why excluded),
\code{sample_id} (for sample-specific exclusions).}

\item{purpose}{Character. What the exclusions apply to:
\itemize{
\item \code{"baseline"}: Exclude from baseline fitting only
\item \code{"integration"}: Exclude from MW integration only
\item \code{"both"} (default): Exclude from both baseline fitting and integration
}}

\item{role}{Not used by this step since no new variables are created.}

\item{trained}{A logical to indicate if the quantities for preprocessing
have been estimated.}

\item{skip}{A logical. Should the step be skipped when the recipe is baked?}

\item{id}{A character string that is unique to this step to identify it.}
}
\value{
An updated version of \code{recipe} with the new step added to the
sequence of any existing operations. An \code{.excluded_regions} column
will be added containing exclusion information for each sample.
}
\description{
\code{step_sec_exclude_regions()} creates a \emph{specification} of a recipe step
that marks regions for exclusion from analysis. Excluded regions can be
solvent peaks, artifacts, flow markers, or other features that should not
be included in baseline fitting or molecular weight integration.
}
\details{
Excluded regions are stored in a list column \code{.excluded_regions} where
each element is a tibble with columns:
\itemize{
\item \code{start}: Start of excluded region (x-axis value)
\item \code{end}: End of excluded region (x-axis value)
\item \code{purpose}: What this exclusion applies to
\item \code{reason}: Optional description of why this region is excluded
}

\strong{Sample-specific exclusions:}
If the \code{regions} data frame includes a \code{sample_id} column, exclusions
can be applied only to specific samples. Rows without \code{sample_id} (or with
\code{sample_id = NA}) are applied globally to all samples.

\strong{Common uses:}
\itemize{
\item Solvent peaks that elute at the end of the chromatogram
\item System peaks or artifacts at specific retention times
\item Flow marker peaks used for retention time correction
\item Air bubbles or other transient artifacts
}
}
\section{Tidying}{
When you \code{\link[recipes:tidy.recipe]{tidy()}} this step, a tibble with columns
\code{terms}, \code{n_regions}, \code{purpose}, and \code{id} is returned.
}

\examples{
\dontrun{
library(recipes)
library(measure)

# Exclude a single region (solvent peak at end)
exclusions <- tibble::tibble(
  start = 18.5,
  end = 20.0,
  reason = "Solvent peak"
)

rec <- recipe(~., data = sec_data) |>
  step_measure_input_long(ri_signal, location = vars(elution_volume)) |>
  step_sec_exclude_regions(regions = exclusions) |>
  prep()

# Exclude multiple regions
exclusions <- tibble::tibble(
  start = c(8.0, 18.5),
  end = c(9.0, 20.0),
  reason = c("Void volume", "Solvent peak")
)

rec <- recipe(~., data = sec_data) |>
  step_measure_input_long(ri_signal, location = vars(elution_volume)) |>
  step_sec_exclude_regions(regions = exclusions, purpose = "integration") |>
  prep()

# Sample-specific exclusions
exclusions <- tibble::tibble(
  start = c(18.5, 15.0),
  end = c(20.0, 16.0),
  sample_id = c(NA, "sample_2"),  # NA = global, specific sample_id = per-sample
  reason = c("Solvent peak", "Artifact in sample_2")
)

rec <- recipe(~., data = sec_data) |>
  step_measure_input_long(ri_signal, location = vars(elution_volume)) |>
  step_sec_exclude_regions(regions = exclusions) |>
  prep()
}
}
\seealso{
\code{\link[=step_sec_baseline]{step_sec_baseline()}} which can use exclusion information,
\code{\link[=step_sec_mw_averages]{step_sec_mw_averages()}} which respects integration exclusions.

Other sec-chromatography: 
\code{\link{step_sec_band_broadening}()},
\code{\link{step_sec_baseline}()},
\code{\link{step_sec_detector_delay}()},
\code{\link{step_sec_integration_window}()},
\code{\link{step_sec_mw_averages}()},
\code{\link{step_sec_mw_distribution}()},
\code{\link{step_sec_mw_fractions}()},
\code{\link{step_sec_peaks_deconvolve}()},
\code{\link{step_sec_peaks_detect}()}
}
\concept{sec-chromatography}
