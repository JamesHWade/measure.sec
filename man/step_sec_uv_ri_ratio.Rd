% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_sec_uv_ri_ratio.R
\name{step_sec_uv_ri_ratio}
\alias{step_sec_uv_ri_ratio}
\title{Calculate UV/RI Ratio for Composition Analysis}
\usage{
step_sec_uv_ri_ratio(
  recipe,
  uv_col = NULL,
  ri_col = NULL,
  output_col = "uv_ri_ratio",
  min_signal = 0.01,
  smooth = TRUE,
  smooth_window = 5,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("sec_uv_ri_ratio")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{uv_col}{Name of the UV detector measure column.}

\item{ri_col}{Name of the RI detector measure column.}

\item{output_col}{Name for the output ratio column. Default is \code{"uv_ri_ratio"}.}

\item{min_signal}{Minimum signal threshold (as fraction of max) below which
ratio is set to NA. Default is 0.01 (1\%). Prevents noisy ratios in baseline.}

\item{smooth}{Logical. Apply smoothing to the ratio? Default is \code{TRUE}.}

\item{smooth_window}{Window size for smoothing (number of points). Default is 5.}

\item{role}{Role for generated columns.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\code{step_sec_uv_ri_ratio()} creates a \emph{specification} of a recipe step that
calculates the ratio of UV to RI detector signals at each elution point.
This ratio is useful for detecting compositional heterogeneity in copolymers
and conjugates.
}
\details{
The UV/RI ratio provides information about chemical composition across the
molecular weight distribution:

\deqn{Ratio(t) = \frac{UV(t)}{RI(t)} = \frac{\varepsilon \cdot c(t)}{(dn/dc) \cdot c(t) \cdot K}}

Since concentration cancels out, the ratio reflects the relative detector
response factors, which depend on chemical composition.

\strong{Applications:}
\itemize{
\item Copolymer composition drift with molecular weight
\item Block copolymer characterization
\item PEGylation analysis (protein-PEG conjugates)
\item Detection of chemical heterogeneity
\item End-group analysis with UV labels
}

\strong{Interpretation:}
\itemize{
\item Constant ratio: Uniform composition across MW
\item Increasing ratio with MW: More chromophore in higher MW species
\item Decreasing ratio with MW: Less chromophore in higher MW species
}
}
\note{
Both UV and RI signals should be baseline-corrected and properly aligned
(using \code{step_sec_detector_delay()}) before calculating the ratio.
}
\examples{
\dontrun{
library(recipes)
library(measure)

# Calculate UV/RI ratio for copolymer
rec <- recipe(~., data = sec_copolymer) |>
  step_measure_input_long(ri_signal, location = vars(elution_time), col_name = "ri") |>
  step_measure_input_long(uv_signal, location = vars(elution_time), col_name = "uv") |>
  step_sec_detector_delay(reference = "ri", delay_volumes = c(uv = 0.05)) |>
  step_sec_baseline() |>
  step_sec_uv_ri_ratio(uv_col = "uv", ri_col = "ri") |>
  prep()
}
}
\seealso{
Other sec-composition: 
\code{\link{step_sec_composition}()}
}
\concept{sec-composition}
