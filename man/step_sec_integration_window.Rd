% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_sec_integration_window.R
\name{step_sec_integration_window}
\alias{step_sec_integration_window}
\title{SEC/GPC Integration Window}
\usage{
step_sec_integration_window(
  recipe,
  measures = NULL,
  start = NULL,
  end = NULL,
  auto_detect = TRUE,
  signal_threshold = 0.01,
  extend_beyond_cal = 0.5,
  calibration_range = NULL,
  min_window_width = 1,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("sec_integration_window")
)
}
\arguments{
\item{recipe}{A recipe object. The step will be added to the sequence of
operations for this recipe.}

\item{measures}{An optional character vector of measure column names to
process. If \code{NULL} (the default), all measure columns will be processed.}

\item{start}{Numeric. Start of integration window (x-axis value, e.g., mL).
If \code{NULL} and \code{auto_detect = TRUE}, determined automatically from data.}

\item{end}{Numeric. End of integration window (x-axis value, e.g., mL).
If \code{NULL} and \code{auto_detect = TRUE}, determined automatically from data.}

\item{auto_detect}{Logical. If \code{TRUE} (default), automatically determine
window bounds from the data when \code{start} or \code{end} is \code{NULL}.}

\item{signal_threshold}{Numeric between 0 and 1. When auto-detecting, the
fraction of maximum signal to use as threshold for defining significant
signal region. Default is \code{0.01} (1\% of max).}

\item{extend_beyond_cal}{Numeric. Fraction of calibration range to extend
beyond the maximum calibration point for capturing low MW species.
Default is \code{0.5} (50\% extension). Only used when calibration info is
available via \code{calibration_range}.}

\item{calibration_range}{Optional numeric vector \code{c(min, max)} specifying
the calibration range in x-axis units. When provided, auto-detection
respects these bounds and applies \code{extend_beyond_cal}.}

\item{min_window_width}{Numeric. Minimum window width to ensure valid
integration. Default is \code{1.0} (1 mL for SEC).}

\item{role}{Not used by this step since no new variables are created.}

\item{trained}{A logical to indicate if the quantities for preprocessing
have been estimated.}

\item{skip}{A logical. Should the step be skipped when the recipe is baked?}

\item{id}{A character string that is unique to this step to identify it.}
}
\value{
An updated version of \code{recipe} with the new step added to the
sequence of any existing operations. An \code{.integration_window} column
will be added containing a tibble with \code{start} and \code{end} for each sample.
}
\description{
\code{step_sec_integration_window()} creates a \emph{specification} of a recipe step
that defines the integration window (start and end x-axis bounds) for
molecular weight calculations. This step adds an \code{.integration_window}
column that downstream steps like \code{\link[=step_sec_mw_averages]{step_sec_mw_averages()}} can use.
}
\details{
The integration window defines the x-axis region used for molecular weight
calculations. For SEC/GPC, this typically corresponds to elution volume.

\strong{Auto-detection algorithm:}
\enumerate{
\item Find significant signal region (above \code{signal_threshold} of max)
\item Extend slightly beyond signal boundaries
\item If \code{calibration_range} provided, constrain start to calibration minimum
\item Allow extension up to \code{extend_beyond_cal} beyond calibration maximum
to capture low MW species
\item Ensure minimum window width
}

\strong{Output format:}
The \code{.integration_window} column contains a list of tibbles, one per row,
each with columns:
\itemize{
\item \code{start}: Start of integration window
\item \code{end}: End of integration window
}
}
\section{Tidying}{
When you \code{\link[recipes:tidy.recipe]{tidy()}} this step, a tibble with columns
\code{terms}, \code{start}, \code{end}, \code{auto_detect}, and \code{id} is returned.
}

\examples{
\dontrun{
library(recipes)
library(measure)

# Auto-detect integration window
rec <- recipe(~., data = sec_data) |>
  step_measure_input_long(ri_signal, location = vars(elution_volume)) |>
  step_sec_integration_window() |>
  prep()

# Explicit window bounds
rec <- recipe(~., data = sec_data) |>
  step_measure_input_long(ri_signal, location = vars(elution_volume)) |>
  step_sec_integration_window(start = 8.0, end = 18.0) |>
  prep()

# With calibration constraints
rec <- recipe(~., data = sec_data) |>
  step_measure_input_long(ri_signal, location = vars(elution_volume)) |>
  step_sec_integration_window(
    calibration_range = c(9.0, 16.0),
    extend_beyond_cal = 0.5
  ) |>
  prep()
}
}
\seealso{
\code{\link[=step_sec_mw_averages]{step_sec_mw_averages()}} which uses the integration window,
\code{\link[=step_sec_conventional_cal]{step_sec_conventional_cal()}} for calibration.

Other sec-chromatography: 
\code{\link{step_sec_band_broadening}()},
\code{\link{step_sec_baseline}()},
\code{\link{step_sec_detector_delay}()},
\code{\link{step_sec_exclude_regions}()},
\code{\link{step_sec_mw_averages}()},
\code{\link{step_sec_mw_distribution}()},
\code{\link{step_sec_mw_fractions}()},
\code{\link{step_sec_peaks_deconvolve}()},
\code{\link{step_sec_peaks_detect}()}
}
\concept{sec-chromatography}
