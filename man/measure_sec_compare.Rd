% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export-functions.R
\name{measure_sec_compare}
\alias{measure_sec_compare}
\title{Compare Multiple SEC Samples}
\usage{
measure_sec_compare(
  ...,
  samples = NULL,
  metrics = c("mw_averages", "mwd", "branching"),
  plot = TRUE,
  reference = 1,
  digits = 2
)
}
\arguments{
\item{...}{Data frames containing SEC results. Each should be a baked recipe
output with measure columns (MW, concentration, etc.).}

\item{samples}{Character vector of sample names. If \code{NULL}, uses names from
\code{...} or generates sequential names ("Sample 1", "Sample 2", etc.).}

\item{metrics}{Character vector specifying which metrics to compare. Options:
\itemize{
\item \code{"mw_averages"}: Mn, Mw, Mz, dispersity
\item \code{"mwd"}: Molecular weight distribution overlap
\item \code{"branching"}: Branching metrics (if available)
}
Default includes all available metrics.}

\item{plot}{Logical. Generate MWD comparison plot? Default is \code{TRUE}.
Note: Plot is only generated when \code{"mwd"} is included in \code{metrics}.}

\item{reference}{Integer or character. Which sample to use as reference for
percent differences. Default is \code{1} (first sample).}

\item{digits}{Integer. Number of decimal places for numeric values.
Default is \code{2}. Must be non-negative.}
}
\value{
A list of class \code{sec_comparison} containing:
\describe{
\item{summary}{Tibble with comparison metrics for all samples}
\item{differences}{Tibble with absolute and percent differences vs reference}
\item{plot}{ggplot2 object (if \code{plot = TRUE} and \code{"mwd"} in \code{metrics}),
otherwise \code{NULL}}
\item{samples}{Character vector of sample names}
\item{reference}{Name of reference sample}
}
}
\description{
Compares SEC analysis results across multiple samples, providing a summary
table of key metrics and optional overlay plots.
}
\details{
This function is useful for:
\itemize{
\item Batch-to-batch comparison
\item Stability studies
\item Process optimization
\item Quality control
}

\strong{Input Data Handling:}

When input data frames contain multiple rows (e.g., multiple injections),
numeric metrics are averaged across rows. For single-row data frames
(typical for processed SEC results), values are used directly.

The function recognizes molecular weight columns with either naming
convention: prefixed (\code{mw_mn}, \code{mw_mw}, \code{mw_mz}, \code{mw_dispersity}) or
standard (\code{Mn}, \code{Mw}, \code{Mz}, \code{dispersity}).

\strong{Comparison Metrics:}

\emph{MW Averages:} Compares Mn, Mw, Mz, and dispersity with absolute and
percent differences from the reference sample.

\emph{MWD Overlay:} Creates overlaid MWD plots showing distribution differences.
Useful for detecting bimodality, tailing, or distribution shifts.

\emph{Branching:} Compares branching index and frequency if available from
triple-detection data.
}
\examples{
\dontrun{
# Compare three batches
comparison <- measure_sec_compare(
  batch1_data,
  batch2_data,
  batch3_data,
  samples = c("Batch 1", "Batch 2", "Batch 3")
)

# View summary table
comparison$summary

# View differences from reference
comparison$differences

# Display overlay plot
comparison$plot

# Compare only MW averages without plot
comparison <- measure_sec_compare(
  sample_a, sample_b,
  metrics = "mw_averages",
  plot = FALSE
)
}
}
\seealso{
Other sec-export: 
\code{\link{measure_sec_slice_table}()},
\code{\link{measure_sec_summary_table}()}
}
\concept{sec-export}
